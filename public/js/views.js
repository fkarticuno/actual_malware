alert('ping!');
var searchQuery;
$(document).ready(function() {

    $('#searchBtn').on('click', function(){
        searchQuery = $('#searchBox').val().trim() ;
        console.log(searchQuery);
        $('#content').empty();
        getDrinkInfo('search.php?s='+searchQuery);
    })

});

function getDrinkInfo(param) {
    url = 'https://www.thecocktaildb.com/api/json/v1/1/'+param;
    response = $.getJSON(url,function(data){
        console.log('data',data)
        if (data.drinks != null) {
            drinkData = data.drinks[0]
            // ============
            ing = [];
            mea = [];
            ings = [];    
            meas = [];
            ing.push(drinkData.strIngredient1,drinkData.strIngredient2,drinkData.strIngredient3,drinkData.strIngredient4,
                drinkData.strIngredient5,drinkData.strIngredient6,drinkData.strIngredient7,drinkData.strIngredient8,
                drinkData.strIngredient9,drinkData.strIngredient10,drinkData.strIngredient11,drinkData.strIngredient12,
                drinkData.strIngredient13,drinkData.strIngredient14,drinkData.strIngredient15
            )
            mea.push(drinkData.strMeasure1,drinkData.strMeasure2,drinkData.strMeasure3,drinkData.strMeasure4,
                drinkData.strMeasure5,drinkData.strMeasure6,drinkData.strMeasure7,drinkData.strMeasure8,
                drinkData.strMeasure9,drinkData.strMeasure10,drinkData.strMeasure11,drinkData.strMeasure12,
                drinkData.strMeasure13,drinkData.strMeasure14,drinkData.strMeasure15
            )
            sliceNulls(ing,mea);
            function sliceNulls(ingArr, meaArr) {
                for (var i=0;i<ingArr.length;i++) {
                    if (ingArr[i] != null){
                        ings.push(ingArr[i]);
                        meas.push(meaArr[i])
                    }

                }
            }
            name = { drink_name: drinkData.strDrink}
            image = {drink_image: drinkData.strDrinkThumb}
            instructions = {drink_instructions: drinkData.strInstructions}
            ingredients = ings;
            measurements = meas;
            var obj = {
                ...name,
                ...image,
                ...instructions
            }
            // ============
                    $('#content').append(`<div>${searchQuery}</div>`,
                    `<div>${name}</div>`,
                    `<img src='${image}'/><br>`
                    );
                    for (var i=0;i<ings.length;i++) {
                        $('#content').append(`<span>${meas[i]} ${ings[i]} ||</span>`)        
                    };
                    $('#content').append(`<div>${instructions}</div>`);
                }
                else {
                    $('#content').append(`<div>Nothing Found</div>`);
                };
            }) 

    console.log(response);
    console.log('===============');
    
}