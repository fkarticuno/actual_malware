<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DrinksApiTest</title>
    <style>
        img {
            height:100px;
            width: 100px;
        }
        .wrap {
            border: 2px double blue;
            width: 575px;
        }
    </style>

</head>
<body>
    <h1>
        DRINKS API TEST
    </h1>
    <p>
        Search Drinks By Name
    </p>
    <span>
        <input type="text" id="drink-input" value="Ice">
        <input id="search-drink" type="submit" value="Search by Drink Name">
        <span>
            ||||
        </span>
        <input id="search-ingredients" type="button" value="Search by Ingredients">
        <input type="text" id="ingredient-input" value="vodka">
    </span>
<div class="wrap">
    <div class="name">Name: Ice</div>
    <div class="image"><img src="https://www.thecocktaildb.com/images/ingredients/ice-Medium.png" alt="" srcset=""></div>
    <div class="glass">Glass</div>
    <div class="infoA">Ingredient 1: Water</div>
    <div class="infoB">
        <iframe id="video" width="560" height="315" src="https://www.youtube.com/embed/hi2k3ygVJ3g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    
    <div>
        <span class="type1"></span>
        <span class="type2"></span>
    </div>
    <div class="maxcp"></div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/ext-core/3.1.0/ext-core.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>    

<script>

//  Handles onClick to search for drinks
var ing = [];    // tracks ingredients to sort out null values
var mes = [];   // tracks measurements to sort out null values
var dSearch, settings, settingsI, drink, dName;
$("#search-ingredients").on("click",function(event) {
    dsearch = $("#ingredient-input").val().trim();
    console.log("ingredient:",dsearch);
    settingsI = {
        "async": true,
        "crossDomain": true,
        "url": "https://cors-anywhere.herokuapp.com/https://www.thecocktaildb.com/api/json/v1/1/filter.php?i=Gin",//+dSearch,
        "method": "GET",
        "headers": {
            "x-rapidapi-host": "the-cocktail-db.p.rapidapi.com",
            "x-rapidapi-key": "1bb40a3f2cmsh737e756f49ff562p1d4980jsn6537251a9bc1",
            "Access-Control-Allow-Origin": "*"  
	    }
    }
    searchIngredients();
})
$("#search-drink").on("click", function(event) {
    dSearch = $("#drink-input").val().trim();
    settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://cors-anywhere.herokuapp.com/https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+dSearch,
        "method": "GET",
        "headers": {
            "x-rapidapi-host": "the-cocktail-db.p.rapidapi.com",
            "x-rapidapi-key": "1bb40a3f2cmsh737e756f49ff562p1d4980jsn6537251a9bc1",
            "Access-Control-Allow-Origin": "*"  
	    }
    }
    searchDrinks();
    
    var youtubeKey = "AIzaSyCeF_O5BoqvplkNVOWliaeeO436INp6juw";
    settings = {
        "async": true,
    	"crossDomain": true, //
        "url": "https://www.googleapis.com/youtube/v3/search?list&q=cat&key="+youtubeKey+
        "&part=snippet,contentDetails,statistics,status",
	    "method": "GET"
        }       
    searchVideo();
});
//  Handles API query for drink stats and forms url for drink image
function searchIngredients() {
$.ajax(settingsI).done(function (res) {
    console.log("ingredient?:",res);             

});
};

function searchDrinks() {
$.ajax(settings).done(function (res) {
    console.log("1",res);
    console.log("2",res.drinks);
    console.log("3",res.drinks[0].strDrink);
    $(".infoA").text("");
    drink = res.drinks[0];
    dName = drAnk.strDrink;
    //console.log("body:",res.body);    
    $('.name').text(`Name: ${drAnk.strDrink}`);
    $('.image').html(`<img src=${drAnk.strDrinkThumb}>`);
    $('.glass').text(`Glass: ${drAnk.strGlass}`);
    ing = [];    
    mes = [];
    ing.push(drAnk.strIngredient1,drAnk.strIngredient2,drAnk.strIngredient3,drAnk.strIngredient4,
        drAnk.strIngredient5,drAnk.strIngredient6,drAnk.strIngredient7,drAnk.strIngredient8,
        drAnk.strIngredient9,drAnk.strIngredient10,drAnk.strIngredient11,drAnk.strIngredient12,
        drAnk.strIngredient13,drAnk.strIngredient14,drAnk.strIngredient15
    )
    mes.push(drAnk.strMeasure1,drAnk.strMeasure2,drAnk.strMeasure3,drAnk.strMeasure4,
        drAnk.strMeasure5,drAnk.strMeasure6,drAnk.strMeasure7,drAnk.strMeasure8,
        drAnk.strMeasure9,drAnk.strMeasure10,drAnk.strMeasure11,drAnk.strMeasure12,
        drAnk.strMeasure13,drAnk.strMeasure14,drAnk.strMeasure15
    )
        for (var i=0; i<ing.length;i++) {
            if (ing[i] != null) {
                $('.infoA').append(` ${i+1}: ${mes[i]} ${ing[i]}`)
                $('.infoA').append("<br>");
            } 
        }
    $('.infoA').append("Instructions:", "<br>",drAnk.strInstructions)
});
}

function searchVideo() {
$.ajax(settings).done(function (res) {
    console.log("youtube 1",res);
    console.log("youtube 2",res.items[0].id)
    $('#video').attr("src","https://www.youtube.com/embed/"+res.items[0].id)
    })
};
//searchByKeyword();

// function searchByKeyword() {
//   var results = YouTube.Search.list('id,snippet', {q: 'dogs', maxResults: 5});
//   for(var i in results.items) {
//     var item = results.items[i];
//     Logger.log('[%s] Title: %s', item.id.videoId, item.snippet.title);
//   }
//   console.log(results)
// }

</script>
</body>
</html>