/*
https://www.thecocktaildb.com/api.php

README: 
var input requires a [removed: search method] and drink name 
ex: [removed: search.php?s=] margarita
    random.php
*/
var input = process.argv;
var ing =[];    // tracks ingredients to sort out null values
var mes = [];   // tracks measurements to sort out null values
console.log("Search:",input[2]);    //  verifies search will be implemented as expected
var unirest = require("unirest");
var req = unirest("GET", "https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+input[2]);
req.query({
	"a": "list"
});
req.headers({
	"x-rapidapi-host": "the-cocktail-db.p.rapidapi.com",
	"x-rapidapi-key": "1bb40a3f2cmsh737e756f49ff562p1d4980jsn6537251a9bc1"
});
req.end(function (res) {
	if (res.error) throw new Error(res.error);
    var drink = res.body.drinks[0];
    //console.log("body:",res.body);    
    console.log("Name:",drink.strDrink);
    console.log("Image:",drink.strDrinkThumb);
    ing = [];    
    mes = [];
    ing.push(drink.strIngredient1,drink.strIngredient2,drink.strIngredient3,drink.strIngredient4,
        drink.strIngredient5,drink.strIngredient6,drink.strIngredient7,drink.strIngredient8,
        drink.strIngredient9,drink.strIngredient10,drink.strIngredient11,drink.strIngredient12,
        drink.strIngredient13,drink.strIngredient14,drink.strIngredient15
    )
    mes.push(drink.strMeasure1,drink.strMeasure2,drink.strMeasure3,drink.strMeasure4,
        drink.strMeasure5,drink.strMeasure6,drink.strMeasure7,drink.strMeasure8,
        drink.strMeasure9,drink.strMeasure10,drink.strMeasure11,drink.strMeasure12,
        drink.strMeasure13,drink.strMeasure14,drink.strMeasure15
    )
        for (var i=0; i<ing.length;i++) {
        if (ing[i] != null) {
            console.log("Ingredient",(i+1)+":",mes[i], ing[i]);
            //console.log("Amount:",mes[i]);
        }
    }
});
