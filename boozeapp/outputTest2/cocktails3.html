<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DrinksApiTest</title>
    <style>
        img {
            height:100px;
            width: 100px;
        }
        .wrap {
            border: 2px double blue;
            width: 200px;
        }
    </style>

</head>
<body>
    <h1>
        DRINKS API TEST
    </h1>
    <p>
        Search Drinks By Name
    </p>
    <span>
        <input type="text" id="drink-input" value="Ice">
        <input id="search-drink" type="submit" value="Search Drink List">
    </span>
<div class="wrap">
    <div class="name">Name: Ice</div>
    <div class="image"><img src="https://www.thecocktaildb.com/images/ingredients/ice-Medium.png" alt="" srcset=""></div>
    <div class="infoA">Ingredient 1: Water</div>

    <div>
        <span class="type1"></span>
        <span class="type2"></span>
    </div>
    <div class="maxcp"></div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/ext-core/3.1.0/ext-core.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>    

<script>

//  Handles onClick to search for drinks
var ing =[];    // tracks ingredients to sort out null values
var mes = [];   // tracks measurements to sort out null values
var dSearch, settings, drink;
$("#search-drink").on("click", function(event) {
    dSearch = $("#drink-input").val().trim();
    settings = {
	"async": true,
	"crossDomain": true,
	"url": "https://cors-anywhere.herokuapp.com/https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+dSearch,
	"method": "GET",
	"headers": {
		"x-rapidapi-host": "the-cocktail-db.p.rapidapi.com",
        "x-rapidapi-key": "1bb40a3f2cmsh737e756f49ff562p1d4980jsn6537251a9bc1",
        "Access-Control-Allow-Origin": "*"  
	}
}
    searchDrinks();
});
//  Handles API query for drink stats and forms url for drink image


function searchDrinks() {
$.ajax(settings).done(function (res) {
    console.log("1",res);
    console.log("2",res.drinks);
    console.log("3",res.drinks[0].strDrink);
    $(".infoA").text("");
    dSearch = $("#drink-input").val().trim();
    
    drink = res.drinks[0];
    //console.log("body:",res.body);    
    $('.name').text(`Name: ${drink.strDrink}`);
    $('.image').html(`<img src=${drink.strDrinkThumb}>`);
    ing = [];    
    mes = [];
    ing.push(drink.strIngredient1,drink.strIngredient2,drink.strIngredient3,drink.strIngredient4,
        drink.strIngredient5,drink.strIngredient6,drink.strIngredient7,drink.strIngredient8,
        drink.strIngredient9,drink.strIngredient10,drink.strIngredient11,drink.strIngredient12,
        drink.strIngredient13,drink.strIngredient14,drink.strIngredient15
    )
    mes.push(drink.strMeasure1,drink.strMeasure2,drink.strMeasure3,drink.strMeasure4,
        drink.strMeasure5,drink.strMeasure6,drink.strMeasure7,drink.strMeasure8,
        drink.strMeasure9,drink.strMeasure10,drink.strMeasure11,drink.strMeasure12,
        drink.strMeasure13,drink.strMeasure14,drink.strMeasure15
    )
        for (var i=0; i<ing.length;i++) {
            if (ing[i] != null) {
                $('.infoA').append(`Ingredient ${i+1}: ${mes[i]} ${ing[i]}`)
                $('.infoA').append("\n");
            }
        }
});
};

</script>
</body>
</html>